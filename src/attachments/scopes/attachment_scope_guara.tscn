[gd_scene load_steps=14 format=4 uid="uid://bakdhh3k0awwd"]

[ext_resource type="Script" uid="uid://bigw503dkolnc" path="res://addons/cabra.lat_shooters/src/world/attachment_scope_3d.gd" id="1_gx3gp"]
[ext_resource type="Texture2D" uid="uid://m7mcqknac45x" path="res://assets/models/attachment_AEL_guara/AEL_GUARA_AEL_guara.jpg" id="2_5ddax"]
[ext_resource type="Shader" uid="uid://dje55noqqcouo" path="res://shaders/psx/psx_lit.gdshader" id="2_8tse5"]
[ext_resource type="Shader" uid="uid://c5onyak6rifo5" path="res://addons/cabra.lat_shooters/src/shaders/scope_lenses.gdshader" id="4_3wn2c"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_j4sc0"]
albedo_color = Color(0.9999998, 0.8582753, 0.5717616, 1)

[sub_resource type="CylinderMesh" id="CylinderMesh_j4sc0"]
material = SubResource("StandardMaterial3D_j4sc0")
top_radius = 0.11

[sub_resource type="ShaderMaterial" id="ShaderMaterial_8tse5"]
render_priority = 0
shader = ExtResource("2_8tse5")
shader_parameter/modulate_color = Color(1, 1, 1, 1)
shader_parameter/albedoTex = ExtResource("2_5ddax")
shader_parameter/uv_scale = Vector2(1, 1)
shader_parameter/uv_offset = Vector2(0, 0)
shader_parameter/uv_pan_velocity = Vector2(0, 0)

[sub_resource type="Gradient" id="Gradient_8tse5"]
interpolation_mode = 1
offsets = PackedFloat32Array(0.041493777, 0.066390045, 0.20746888, 0.2614108)
colors = PackedColorArray(1, 1, 1, 1, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0)

[sub_resource type="GradientTexture2D" id="GradientTexture2D_3wn2c"]
gradient = SubResource("Gradient_8tse5")
width = 512
height = 512
fill = 1
fill_from = Vector2(0.4871795, 0.491453)
fill_to = Vector2(0.7692308, 0.26068377)

[sub_resource type="ViewportTexture" id="ViewportTexture_gx3gp"]
viewport_path = NodePath("ScopeViewport")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_gx3gp"]
resource_local_to_scene = true
render_priority = 0
shader = ExtResource("4_3wn2c")
shader_parameter/u_scope_texture = SubResource("ViewportTexture_gx3gp")
shader_parameter/u_reticle_texture = SubResource("GradientTexture2D_3wn2c")
shader_parameter/u_reticle_tint = Color(1, 0.12315822, 0, 0.80300003)
shader_parameter/u_bezel_color = Color(0, 0, 0, 1)
shader_parameter/u_front_tint_color = Color(1, 0.58, 0, 0.757)
shader_parameter/u_rear_tint_color = Color(0, 1, 1, 0.298)
shader_parameter/u_lens_curvature = 0.3
shader_parameter/u_reflection_intensity = 0.4
shader_parameter/u_chromatic_aberration = 0.005
shader_parameter/u_vignette_strength = 0.3
shader_parameter/u_fresnel_power = 2.0
shader_parameter/u_front_lens_scale = Vector2(0.665, -0.64)
shader_parameter/u_front_lens_offset = Vector2(-0.25, 0.25)
shader_parameter/u_front_lens_radius = 0.45
shader_parameter/u_front_lens_rotation = 89.525
shader_parameter/u_rear_lens_scale = Vector2(0.795, 0.585)
shader_parameter/u_rear_lens_offset = Vector2(0.245, 0.235)
shader_parameter/u_rear_lens_radius = 0.45
shader_parameter/u_rear_lens_rotation = -89.525
shader_parameter/u_squircle_exponent = 4.0

[sub_resource type="ArrayMesh" id="ArrayMesh_8tse5"]
resource_local_to_scene = true
_surfaces = [{
"aabb": AABB(-0.033529334, -0.0010549724, -0.081759445, 0.061529867, 0.07800016, 0.14461376),
"attribute_data": PackedByteArray("S1GVaVkolWlLUZVpWSiVaVouC0VKS39GSksLRVouf0a+S2k/5i1oP+YtaD++S2k/uKKxQ/XGVWK5olVi9MawQ6VI7UHuKYVDOS5NRPBPc0V5qzHB8sfWvvLHMcF5q9a+eavWvvLHIL7yx9a+easgvnmrIL7yx1W/8scgvnmrVb95q1W/8sf/wfLHVb95q//Beav/wfLHGcXyx//BeasZxXmrGcXyx3TH8scZxXmrdMd5q3TH8scqyPLHdMd5qyrIeasqyPLH9cbyxyrIeav1xn/hRryY6Ua7yOZGu5jpRrx5q/XG8sdLxPLH9cZ5q0vEeatLxPLHMcHyx0vEeasxwe+v40oqrNE/ga+YRHyi1EAxp2E+lai8UkqtSVBFoIVMnKNMUdefO0alSO1BjUhILE1JNinlSFw/TUk2KdIxkywSL54ojUhILBIvnii5MfQ/OS5NRNIxkywLwqo9uKKxQ6Knqj30xrBD5i1oP+YtBSrmLQUq5i1oP+YtBSq+SwYqvksGKuYtBSq+SwYqvktpP75LaT++SwYqS1ElS3lNV0ZLUVdGDiqPRB4sQ0TuKchHzim+VXBPo0eQT3JVni2FQ+4pyEfBS19DtCvbRH868Ec/OflEEiquVAkqQEgtOsBUGU1bKfdJLCbHTCwmMEvQKJgrLCYvLdAoRStaKWcuLCaepQwlG6elJ1KlMCgyqAwlWsQwKHrBCyUOxAslksKlJ/TesdMogGK0KIDQ0m/ffbNxr1qv7diXriGJ2Y7RhbKSVKlfkuyljo7RKxgj8FHtI9NNGCN3ThkjS1EYI1koGCNZKBgj0SsYIy8t0ChNSTYpEi+eKPdJLCZnLiwmMEvQKDBL0CilSO1BTUk2KRlNWynwT3NFHIbLkjGAgdExgFq0YN8JtGLfpNPir2avOtjQrvykqY5XifWOX6jwke4phUMSL54oOS5NREUrWikvLdAouKKxQxCpEiuip6o9UqUwKBunpScbp6UnncASKxCpEit6wQslMqgMJZLCpSeSwqUnC8KqPZ3AEitaxDAo9MawQ+9LXz6LQdRFt0UZQE9E3FMBQWFNH1XKR9FRT0FpUBJVllRXTzJKzFbI5ka7mOn1t8jm9beY6Ua7yOb1t5jpl7N/4ZezmOn1t5zg1azy6rqvnOC6r/Lq1ayc4FW68ur+vZzg/r3y6lW6nOC6r/Lq47Sc4OO08uq6r5zg47Ty6lW6nOBVuvLq47Sc4P698up2vpzgdr7y6v69f+HTtpjpk7p/4ZO6mOnTtn/hk7qY6Ua8f+FGvJjpk7o="),
"format": 34896613399,
"index_count": 420,
"index_data": PackedByteArray("AAABAAIAAAADAAEABAAFAAYABAAHAAUACAAJAAoACAALAAkADAANAA4ADAAPAA0AEAARABIAEAATABEAFAAVABYAFAAXABUAGAAZABoAGAAbABkAHAAdAB4AHAAfAB0AIAAhACIAIAAjACEAJAAlACYAJAAnACUAKAApACoAKAArACkALAAtAC4ALAAvAC0AMAAxADIAMAAzADEANAA1ADYANAA3ADUAOAA5ADoAOAA7ADkAPAA9AD4APAA/AD0AQABBAEIAQABDAEEAQQBDAEQAQwBAAEUARQBAAEYAQwBFAEcARwBFAEgAQwBHAEkASgBLAEwASgBNAEsATgBPAFAATgBRAE8AUgBTAFQAUgBVAFMAVgBXAFgAVgBZAFcAWgBbAFwAWgBdAFsAXgBfAGAAXgBhAF8AYgBjAGQAYgBlAGMAZgBnAGgAaQBqAGsAbABtAG4AbQBsAG8AbwBsAHAAbQBvAHEAcgBzAHQAcwByAHUAdQByAHYAcwB1AHcAeAB5AHoAeAB7AHkAfAB9AH4AfAB/AH0AgACBAIIAgACDAIEAhACFAIYAhACHAIUAiACJAIoAiwCJAIgAiQCLAIwAjACLAI0AiQCMAI4AiQCOAI8AjgCMAJAAjgCQAJEAkgCTAJQAkgCVAJMAkwCVAJYAlQCSAJcAlwCSAJgAlQCXAJkAmgCbAJwAmwCaAJ0AnQCaAJ4AmwCdAJ8AoAChAKIAoQCgAKMAoQCjAKQApQCmAKcApgCoAKkApgCqAKgApgClAKoAqACqAKsAqgClAKwArAClAK0AqgCsAK4ArwCwALEAsACvALIAsACyALMAtAC1ALYAtQC0ALcAtQC3ALgAuQC6ALsAugC5ALwAvAC5AL0AugC8AL4AvwDAAMEAwAC/AMIAwADCAMMAxADFAMYAxADHAMUAxQDHAMgAxwDEAMkAyQDEAMoAxwDJAMsAywDJAMwAxwDLAM0AzgDPANAAzgDRAM8A0gDTANQA0gDVANMA1gDXANgA1gDZANcA2gDbANwA2gDdANsA3gDfAOAA3gDhAN8A4gDjAOQA4gDlAOMA5gDnAOgA5gDpAOcA6gDrAOwA6gDtAOsA7gDvAPAA7gDxAO8A"),
"material": SubResource("ShaderMaterial_8tse5"),
"name": "AEL_Guara_Profile_Material",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 242,
"vertex_data": PackedByteArray("1hIAAP//qSr+/wAAuCKpKtUSAAC4Iqkq/v8AAP//qSo23bKECJUAAKA1bX/gpAAAoDWyhAiVAAA23W1/4KQAAP4yKplM/lTV2d8qmRLwVNXZ3yqZTP5U1f4yKpkS8FTV1hIAgP//AID+/wAA//8AgNYSAAD//wCA//8AgP//AICgNbKECJWl//7/AIBrkqX/Nt2yhAiVggHWEgCAa5Kl/4NmOHwypfbEqVAskCkf9sSDZjh8KR/2xKlQLJAypfbEqVAskDKlJNAcMC+WKR8k0KlQLJApHyTQHTAvljKlJNAdMC+WMqW/IEsR9IspH78gHDAvlikfvyBMEfSLMqW/IEwR9IsypZQPAABldSkflA9LEfSLKR+UDwAAZXUypZQPAABldTKlbALPAh5bzgpsAgAAZXUpH2wCzwIeWzKlbALPAh5bMqVNFKkYKkfOCk0UzwIeW84KTRSpGCpHMqVNFKkYKkcypQ8lNDknQSkfDyWpGCpHzgoPJTU5J0EypQ8lNTknQTKlq8wFWGJLKR+rzDQ5J0EpH6vMBVhiSzKlq8w0OSdBKR8PJakYKkcAAA8lqRgqR84KDyU0OSdBAAAPJQVYYksypfHCUmnxYSkf8cIFWGJLKR/xwlNp8WEypfHCU2nxYTKlEcCDZjh8KR8RwFJp8WEpHxHAg2Y4fDKlEcBTafFhMqUAgKlQLJAypQCAg2Y4fDKlAIBMEfSLMqUAgB0wL5YypQCANTknQTKlAIAFWGJLMqUAgM8CHlsypQCAqRgqRzKlAIAAAGV1MqUAgKA1soQIlcwOsz243wqszA6zPf7kMpw+waA1bX/gpMwOsz3+5DKcnf8j1bjfCqxE/yPV/uQynAP/sz243wqsXP8j1f7kMpxjwTbdbX/gpAPCNt2yhAiVv8Mj1bjfCqzRwtnfKplM/hOF1hIAgP//E4X+MiqZTP4Thf//AID//xOF2d8qmUz+ugJ81tbmluu6AnzW1uZF+LoC2d8qmRLwugJ81tbmRfipKlk81uaW66kqWTzW5kX4qSp81tbmluupKlk81uZF+Oc//jIqmRLw5z/+MiqZTP7nP1k81uaW6+c/1hKMbrgik+H4KACAuCKT4dYSAIAhLJPh/v8AgCEsquDd6QCAuCKq4P7/jG64Iqrg/v8AALgi///WEoxuuCL//9USAAC4Iv//3ekAgLgi///+/4xuuCL///goAIC4Iv//3ekAgLgiFgbWEgCAISyGAfgoAIC4IiEA/v8AgGuSYwD+/wCAISzZHtYSAIBrkigA5CP78oydj+myNv//z57/6NAl///9pbfnXy8y9cOd1e4E7f///aWC6XfjMvXDnRvq8+778oudOewj3P//zp6359Al//8p8MehiS8k9b73gKHfI+DyOfgwobI2//9X92ej9+7g8jn446Ek3P//V/c2ogXt//8p8GejTOMk9b73dKLVEgAAuCIQANYSAID//xgA1hIAAP//SgHWEoxuuCIXANYSAIBrkjAA1hIAgCEsoADQJf//KfAdAN8j4PI5+AgB5CP78oydHwHQJf///aXRACPc///OntMp0CX///2lAOiyNv//z54AALI2//9X90Ep0CX//ynwMOkF7f//KfBRKQTt///9pXAqJNz//1f3weR34zL1w53u/7M9/uQynLL/I9X+5DKcIQGyNv//z54y/yPc///Onv//Xy8y9cOd6PxfLzL1w53N/aA1soQIlRv+sz3+5DKc9//kI/vyjJ0i/dYSAIBrkgz+9+7g8jn4/7/+/wAA////v///AID//33L/v+MbrgiBMD+/wAAuCIHwP7/AIBrkgHA/v8AgCEsAcAE7f///aUAwAXt//8p8AHA8+778oudAMD+/wCAa5KG/CPV/uQynDv/Nt2yhAiVGfzz7vvyi535/3fjMvXDnTf/1hIAgP//Y4VZPNbmRfhmhf4yKplM/mOF3yPg8jn4ZYWJLyT1vvdlhYkvJPW+98uCfNbW5kX4y4JZPNbmRfjLgiTc//9X98uCsjb//1f3y4JM4yT1vvfLgkzjJPW+92aF2d8qmUz+YYV81tbmRfhohffu4PI5+GSF//8AgP//YoUcMC+WAAD//4NmOHwAAP//qVAskAAA//8EWGJLAAD//1Jp8WEAAP//AABldQAA//9LEfSLAAD//6kYKkcAAP//zwIeWwAA//80OSdBAAD//6kYKkfOCk0UzwIeWwAATRTPAh5bzgpNFKkYKkcAAE0UzwIeW84KbAIAAGV1AABsAgAAZXUpH2wCzwIeWwAAbAIAAGV1KR9r8EsR9IsAAGvwSxH0iykfa/AAAGV1AABr8KlQLJApH/bEg2Y4fAAA9sSDZjh8KR/2xKlQLJAAAPbESxH0iykfP98cMC+WAAA/3xwwL5YpHz/fSxH0iwAAP98cMC+WKR8k0KlQLJAAACTQqVAskCkfJNAcMC+WAAAk0INmOHwpHxHAUmnxYQAAEcBSafFhKR8RwINmOHwAABHAUmnxYSkf8cIEWGJLAADxwgVYYkspH/HCUmnxYQAA8cIFWGJLKR+rzDQ5J0EAAKvMNDknQSkfq8wEWGJLAACrzFVVVVVVVVVVVVVVVVVVVVX4f0m6+H9Juvh/Sbr4f0m6VNWqKlTVqipU1aoqVNWqKsKmYFPCpmBTwqZgU8KmYFP1gD3Z9YA92R+EBNf1gD3ZnLZMG5y2TBuctkwbnLZMG37OPSd+zj0nfs49J37OPScW4AswFuALMBbgCzAW4AswU/AoOFPwKDhT8Cg4U/AoOE9BXH1PQVx9T0FcfU9BXH0JSutrCUrrawlK62sJSutrKlKpWypSqVsqUqlbKlKpW3xbBUl8WwVJfFsFSXxbBUkqUqlbKlKpWypSqVsqUqlbE2nYLRNp2C0TadgtE2nYLfCJ+ATwifgE8In4BPCJ+ATCpmBTwqZgU8KmYFPCpmBTwqZgU8KmYFPCpmBTwqZgU8KmYFPCpmBTmbaibZm2om3fh10WmbaibWxFfv8Hf9I6sX4BOz1FKf+PmO/2rGg317NjrswZprDv0f/1f9H/9X/R//V/0f/1f3lBB315QQd9eUEHfXlBB31VVVVVVVVVVVVVVVVVVVVVdHoTC3R6Ewt0ehMLdHoTC6GLTNihi0zYoYtM2CmpzA4pqcwOKanMDlx+XP62gEf/Mn8z/9N20vbNW87bwH+//3GGxbzUwKsBD8AjADXAbAAInvqwFMAsAGCIu9gnisjXRY6T1R549dVXp4cIU6agBgJdOABoqkEOrrsctbq+hbU+zBq4DrLEswHLuDpXy0Q4NcwPMmXDzFgvQVWCNUFfgiH/kT8zQVyCQkF4gmj+MT82QWKC2f5sP/H+ej+d/k0/1NSqKYOXPbT/f/+/f9QAKTPLaBaI1BMpMdVkKpCatrJVi/QAhoRe8XiZVhDFi7fq/3+E9bim+dHkaIkO3mS0Eg6oSdAoc+ADqWXjEc2ELwUBhZoFRaWHSG+EyAFwhBYBcoTMAnKE2gJwhFwDb4SsAnCESwNyhz7wAGAP2MuOrelwWMPQlLYwL4flvGYM57JiruNcZyznEWIs5xFilf/Kf5X/yn+V/8p/lf/Kf5X/yn+V/8p/quGhmLrmAJog4FiYC+PWmOzmlpoBgP3/AYD9/wGA/f8BgP3/AYD9/wGA/f8BgP3/AYD9/wGA/f8BgP3/CUrrawlK62sJSutrCUrra09BXH1PQVx9T0FcfU9BXH1U8Cg4VPAoOFTwKDhU8Cg4nLZMG5y2TBuctkwbnLZMGxbgCzAW4AswFuALMBbgCzB+zj0nfs49J37OPSd+zj0n8In4BPCJ+ATwifgE8In4BBNp2C0TadgtE2nYLRNp2C18WwVJfFsFSXxbBUl8WwVJ")
}, {
"aabb": AABB(-0.021272551, 0.037769824, 0.0113786375, 0.041546166, 0.031508364, 0.04247808),
"attribute_data": PackedByteArray("pn/EeQAA//8AAMR5pn//////xHmmf///pn/Eef////8="),
"format": 34896613399,
"index_count": 12,
"index_data": PackedByteArray("AAABAAIAAAADAAEABAAFAAYABAAHAAUA"),
"material": SubResource("ShaderMaterial_gx3gp"),
"name": "LensesMaterial",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 8,
"vertex_data": PackedByteArray("5AMAAAAAEfwj8GLuYhgF/NkPYu5jGC78F/wAAAAA7PvcDf//vPDIvv//tj///x7BAAC2P///R7wh8v//vPDxw97Bmj2Awkc+KcDIOxPE9z/V+V4G0PkFBtn5wQbN+aQF")
}]

[sub_resource type="ConvexPolygonShape3D" id="ConvexPolygonShape3D_8tse5"]
points = PackedVector3Array(-0.029006142, -0.0010549724, -0.06215392, -0.03285477, 0.026706243, -0.081759445, -0.027602807, 0.02062107, -0.081759445, -0.019785095, 0.018796282, -0.081759445, 0.02799451, -0.0010549724, -0.06215392, -0.029006142, -0.0010549724, 0.062840156, -0.033529334, 0.034707826, -0.081759445, -0.03285477, 0.026706243, 0.011554368, -0.012376936, 0.021911403, -0.081759445, -0.008215118, 0.02878299, -0.081759445, 0.02799451, 0.032623444, -0.06215392, 0.028000534, 0.037945107, 0.062840156, 0.02799451, -0.0010549724, 0.062840156, -0.029006142, 0.037945107, 0.062840156, -0.033529334, 0.034707826, 0.011554368, -0.029373538, 0.04158705, -0.081759445, -0.024446812, 0.076937556, 0.012007348, -0.0088957045, 0.036792208, -0.081759445, 0.022676297, 0.037945107, -0.06215392, 0.02799451, 0.037945107, -0.05683141, -0.014147667, 0.042869747, -0.081759445, 0.023904964, 0.072944395, 0.058451913, 0.020273164, 0.04561075, 0.061891727, 0.023898944, 0.072974935, 0.0072369054, -0.02127877, 0.04561075, 0.061891727, -0.024910575, 0.072944395, 0.058451913, -0.024446812, 0.076937556, 0.053907968, -0.021971405, 0.04470217, -0.081759445, -0.020387383, 0.076937556, 0.007944688, 0.019375753, 0.076937556, 0.007944688, 0.02343518, 0.076937556, 0.012007348, 0.02343518, 0.076937556, 0.053907968, 0.019381773, 0.076937556, 0.05795648, -0.020387383, 0.076937556, 0.05795648)

[node name="attachment_scope_guara" type="RigidBody3D" node_paths=PackedStringArray("camera_position_node", "grab_points")]
collision_layer = 8
collision_mask = 8
script = ExtResource("1_gx3gp")
camera_position_node = NodePath("CameraPosition")
min_fov = 45.0
default_fov = 45.0
grab_points = [NodePath("Marker3D")]
grab_point_weights = Array[int]([1])
spring_constant = Vector3(1000, 1000, 1000)
linear_damping_per_axis = Vector3(25, 25, 25)
angular_damping_per_axis = Vector3(20, 20, 20)
attachment_mode = 1
enable_attachment = true
attachment_distance_threshold = 0.01

[node name="Marker3D" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.022556163, 0)
visible = false

[node name="CameraPosition" type="Marker3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.06075795, -0.0002978444)
visible = false

[node name="ScopeViewport" type="SubViewport" parent="."]

[node name="Camera3D" type="Camera3D" parent="ScopeViewport"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.7136335e-06, 0.059692696, -0.00067846477)
visible = false
current = true
fov = 1.7187443

[node name="DummyMesh" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 1, 0, -600)
visible = false
mesh = SubResource("CylinderMesh_j4sc0")

[node name="MESH" type="MeshInstance3D" parent="."]
mesh = SubResource("ArrayMesh_8tse5")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("ConvexPolygonShape3D_8tse5")
